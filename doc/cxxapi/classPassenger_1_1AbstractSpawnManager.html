<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Passenger: Passenger::AbstractSpawnManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacePassenger.html">Passenger</a>::<a class="el" href="classPassenger_1_1AbstractSpawnManager.html">AbstractSpawnManager</a>
  </div>
</div>
<div class="contents">
<h1>Passenger::AbstractSpawnManager Class Reference<br/>
<small>
[<a class="el" href="group__Support.html">Apache-independent support classes and function</a>]</small>
</h1><!-- doxytag: class="Passenger::AbstractSpawnManager" -->
<p>Spawning of application processes.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="AbstractSpawnManager_8h_source.html">AbstractSpawnManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Passenger::AbstractSpawnManager:</div>
<div class="dynsection">
<div class="center"><img src="classPassenger_1_1AbstractSpawnManager__inherit__graph.png" border="0" usemap="#Passenger_1_1AbstractSpawnManager_inherit__map" alt="Inheritance graph"/></div>
<map name="Passenger_1_1AbstractSpawnManager_inherit__map" id="Passenger_1_1AbstractSpawnManager_inherit__map">
<area shape="rect" href="classPassenger_1_1SpawnManager.html" title="An AbstractSpawnManager implementation." alt="" coords="31,80,220,107"></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classPassenger_1_1AbstractSpawnManager-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacePassenger.html#aced1f248465136b313c6dec5fe6ca492">ProcessPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPassenger_1_1AbstractSpawnManager.html#a6ca7efc68595bf962f5cce5e6407f176">spawn</a> (const <a class="el" href="structPassenger_1_1PoolOptions.html">PoolOptions</a> &amp;options)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Spawn a new application process.  <a href="#a6ca7efc68595bf962f5cce5e6407f176"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPassenger_1_1AbstractSpawnManager.html#a5043681dbfb9b77fa0679c510ede853c">reload</a> (const string &amp;appRoot)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shutdown the ApplicationSpawner server that's running at the given application root.  <a href="#a5043681dbfb9b77fa0679c510ede853c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPassenger_1_1AbstractSpawnManager.html#a225574ef363847058554fde9d5704950">killSpawnServer</a> () const =0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Forcefully kill the spawn server.  <a href="#a225574ef363847058554fde9d5704950"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual pid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPassenger_1_1AbstractSpawnManager.html#aa630e8c364f391b54c0bfb723326836a">getServerPid</a> () const =0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the spawn server's PID.  <a href="#aa630e8c364f391b54c0bfb723326836a"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Spawning of application processes. </p>
<p>An <a class="el" href="classPassenger_1_1AbstractSpawnManager.html" title="Spawning of application processes.">AbstractSpawnManager</a> is responsible for spawning new application processes. Use the <a class="el" href="classPassenger_1_1AbstractSpawnManager.html#a6ca7efc68595bf962f5cce5e6407f176" title="Spawn a new application process.">spawn()</a> method to do so. <a class="el" href="classPassenger_1_1AbstractSpawnManager.html" title="Spawning of application processes.">AbstractSpawnManager</a> is guaranteed to be thread-safe.</p>
<p><a class="el" href="classPassenger_1_1AbstractSpawnManager.html" title="Spawning of application processes.">AbstractSpawnManager</a> is just an interface. There are two concrete implementations, namely <a class="el" href="classPassenger_1_1SpawnManager.html" title="An AbstractSpawnManager implementation.">SpawnManager</a> and StubSpawnManager. The former is the one that's usually used, while the latter exists for unit testing purposes. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa630e8c364f391b54c0bfb723326836a"></a><!-- doxytag: member="Passenger::AbstractSpawnManager::getServerPid" ref="aa630e8c364f391b54c0bfb723326836a" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual pid_t Passenger::AbstractSpawnManager::getServerPid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the spawn server's PID. </p>
<p>Used within unit tests. </p>

<p>Implemented in <a class="el" href="classPassenger_1_1SpawnManager.html#af34df8cfccfc64507999f1b48bc5a126">Passenger::SpawnManager</a>.</p>

</div>
</div>
<a class="anchor" id="a225574ef363847058554fde9d5704950"></a><!-- doxytag: member="Passenger::AbstractSpawnManager::killSpawnServer" ref="a225574ef363847058554fde9d5704950" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Passenger::AbstractSpawnManager::killSpawnServer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Forcefully kill the spawn server. </p>
<p>This AbstractSpawnManager's state will not be modified, so that it won't know that the spawn server is killed until next time it sends a command to it.</p>
<p>Used within unit tests. </p>

<p>Implemented in <a class="el" href="classPassenger_1_1SpawnManager.html#a9210212c23c5a8ee5ee4dd5c9dcdf57d">Passenger::SpawnManager</a>.</p>

</div>
</div>
<a class="anchor" id="a5043681dbfb9b77fa0679c510ede853c"></a><!-- doxytag: member="Passenger::AbstractSpawnManager::reload" ref="a5043681dbfb9b77fa0679c510ede853c" args="(const string &amp;appRoot)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Passenger::AbstractSpawnManager::reload </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>appRoot</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Shutdown the ApplicationSpawner server that's running at the given application root. </p>
<p>This method should be called when it's time to reload an application.</p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classPassenger_1_1SystemException.html" title="Represents an error returned by a system call or a standard library call.">SystemException</a></em>&nbsp;</td><td>Unable to communicate with the spawn server, even after a restart. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classPassenger_1_1SpawnException.html" title="Thrown when SpawnManager or ApplicationPool fails to spawn an application instance...">SpawnException</a></em>&nbsp;</td><td>The spawn server died unexpectedly, and a restart was attempted, but it failed. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classPassenger_1_1SpawnManager.html#aad71b2ea9431f3286f23a6e6f80e0981">Passenger::SpawnManager</a>.</p>

</div>
</div>
<a class="anchor" id="a6ca7efc68595bf962f5cce5e6407f176"></a><!-- doxytag: member="Passenger::AbstractSpawnManager::spawn" ref="a6ca7efc68595bf962f5cce5e6407f176" args="(const PoolOptions &amp;options)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacePassenger.html#aced1f248465136b313c6dec5fe6ca492">ProcessPtr</a> Passenger::AbstractSpawnManager::spawn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPassenger_1_1PoolOptions.html">PoolOptions</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>options</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Spawn a new application process. </p>
<p>Spawning details are to be passed via the <code>options</code> argument.</p>
<p>If the spawn server died during the spawning process, then the server will be automatically restarted, and another spawn attempt will be made. If restarting the server fails, or if the second spawn attempt fails, then an exception will be thrown.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>An object containing the details for this spawn operation, such as which application to spawn. See <a class="el" href="structPassenger_1_1PoolOptions.html" title="This struct encapsulates information for ApplicationPool::get() and for SpawnManager::spawn()...">PoolOptions</a> for details. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A smart pointer to a <a class="el" href="classPassenger_1_1Process.html" title="Represents a single application process, as spawned by SpawnManager or by ApplicationPool::Interface...">Process</a> object, which represents the application process that has been spawned. Use this object to communicate with the spawned process. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classPassenger_1_1SpawnException.html" title="Thrown when SpawnManager or ApplicationPool fails to spawn an application instance...">SpawnException</a></em>&nbsp;</td><td>Something went wrong. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boost::thread_interrupted</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Anything</em>&nbsp;</td><td>thrown by options.environmentVariables-&gt;getItems(). </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classPassenger_1_1SpawnManager.html#a88a94ba4d41dab492cb1dc8a0f998973">Passenger::SpawnManager</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="AbstractSpawnManager_8h_source.html">AbstractSpawnManager.h</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
